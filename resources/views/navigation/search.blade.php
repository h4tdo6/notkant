@extends('layout.main')

@section('title', 'KantStopThinking - Search')

@section('content')
    <!-- Main scrollable container -->
    <div class="h-screen overflow-y-auto instagram-scroll"> <!-- Height set to screen height with bottom padding for footer -->
        <div class="py-20 px-[300px]">
            <!-- Posts Grid -->
            <div class="grid grid-cols-3 gap-1 mt-1">
                <!-- Video 1 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="byB4UpvRF8U">
                    <img src="https://img.youtube.com/vi/byB4UpvRF8U/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 2 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="nsgAsw4XGvU">
                    <img src="https://img.youtube.com/vi/nsgAsw4XGvU/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 3 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="ZvwgdVfwEj0">
                    <img src="https://img.youtube.com/vi/ZvwgdVfwEj0/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 4 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="vaYVQMpkTYQ">
                    <img src="https://img.youtube.com/vi/vaYVQMpkTYQ/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 5 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="g840ez9xbt0">
                    <img src="https://img.youtube.com/vi/g840ez9xbt0/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 6 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="qWAaHATg2wc">
                    <img src="https://img.youtube.com/vi/qWAaHATg2wc/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 7 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="GQkxOQUI50M">
                    <img src="https://img.youtube.com/vi/GQkxOQUI50M/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 8 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="ZOoJ9Cq3oKM">
                    <img src="https://img.youtube.com/vi/ZOoJ9Cq3oKM/default.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Video 9 -->
                <div class="aspect-square overflow-hidden cursor-pointer relative video-thumbnail" data-video-id="wVjC3Zn8XC0">
                    <img src="https://img.youtube.com/vi/wVjC3Zn8XC0/maxresdefault.jpg" alt="YouTube Thumbnail" class="w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-black bg-opacity-50 flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="videoModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="relative w-full max-w-4xl">
            <!-- Close button -->
            <button id="closeModal" class="absolute -top-10 right-0 text-white text-2xl font-bold z-10">
                &times;
            </button>

            <!-- YouTube iframe container -->
            <div class="relative pb-9/16 w-full h-0">
                <iframe id="youtubePlayer" class="absolute top-0 left-0 w-full h-full"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <!-- JavaScript for Modal Functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videoThumbnails = document.querySelectorAll('.video-thumbnail');
            const videoModal = document.getElementById('videoModal');
            const youtubePlayer = document.getElementById('youtubePlayer');
            const closeModal = document.getElementById('closeModal');

            // Open modal and load video when thumbnail is clicked
            videoThumbnails.forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    const videoId = this.getAttribute('data-video-id');
                    youtubePlayer.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                    videoModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling when modal is open
                });
            });

            // Close modal
            closeModal.addEventListener('click', function() {
                youtubePlayer.src = '';
                videoModal.classList.add('hidden');
                document.body.style.overflow = ''; // Restore scrolling
            });

            // Also close modal when clicking outside the video
            videoModal.addEventListener('click', function(event) {
                if (event.target === videoModal) {
                    youtubePlayer.src = '';
                    videoModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });

            // Close modal with ESC key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' && !videoModal.classList.contains('hidden')) {
                    youtubePlayer.src = '';
                    videoModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });
        });
    </script>

    <style>
        .pb-9\/16 {
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio for YouTube videos */
        }
    </style>
@endsection
